# Quick Start Guide

Snabbreferens f√∂r att komma ig√•ng med projektet.

## üöÄ Snabbstart (10 minuter)

### 1. Initial Setup

```bash
# Klona repo (efter f√∂rsta push)
git clone <your-repo-url>
cd ci-cd-gruppexamination

# Skapa dev branch
git checkout -b dev
git push -u origin dev
```

### 2. Installera Dependencies

**Frontend:**

```bash
cd frontend
npm install
cd ..
```

**Backend:**

```bash
cd backend
npm install
cd ..
```

### 3. Konfigurera Milj√∂variabler

**Frontend `.env`:**

```env
REACT_APP_API_URL=http://localhost:3000/api
```

**Backend `.env`:**

```env
NODE_ENV=development
PORT=3000
DATABASE_URL=your_database_url_here
```

### 4. K√∂r Lokalt

**Terminal 1 - Backend:**

```bash
cd backend
npm run dev
# K√∂r p√• http://localhost:3000
```

**Terminal 2 - Frontend:**

```bash
cd frontend
npm start
# √ñppnar http://localhost:3000 (React dev server)
```

## üìã GitHub Secrets Checklist

L√§gg in dessa i **Settings > Secrets and variables > Actions**:

### üîê Repository Secrets

F√∂r k√§nslig data (tokens, keys, credentials) - g√• till **Repository secrets**:

- [x] `DOCKER_HUB_TOKEN` - Docker Hub authentication token
- [x] `RENDER_API_KEY` - Render API key f√∂r deployment
- [x] `AWS_ACCESS_KEY_ID` - AWS access key
- [x] `AWS_SECRET_ACCESS_KEY` - AWS secret access key

### üìù Repository Variables

F√∂r icke-k√§nslig konfigurationsdata - g√• till **Variables**:

- [x] `DOCKER_HUB_USERNAME` - Docker Hub anv√§ndarnamn
- [x] `RENDER_SERVICE_ID` - Render service ID (hittas i Render dashboard)
- [x] `AWS_S3_BUCKET_NAME` - Namn p√• S3 bucket (t.ex. `meetup-app-frontend`)
- [x] `AWS_REGION` - AWS region (t.ex. `eu-north-1`)
- [ ] `REACT_APP_API_URL` (valfritt) - Production API URL f√∂r frontend build

> **Notera:** Secrets √§r krypterade och visas aldrig i logs. Variables kan ses i workflows men √§ndras inte ofta. Om ni har flera milj√∂er (staging/production) kan ni anv√§nda **Environment secrets/variables** ist√§llet.

## üéØ Vad √§r syftet med Docker och Render?

### Docker - Containerisering av Backend

**Vad √§r Docker?**

- Docker paketerar din backend-applikation i en "container" med alla dependencies
- Detta s√§kerst√§ller att appen k√∂rs likadant √∂verallt (lokalt, i CI/CD, p√• Render)
- T√§nk p√• det som en liten "box" med allt som beh√∂vs f√∂r att k√∂ra appen

**Varf√∂r anv√§nds det h√§r?**

1. **Konsistens**: Din backend k√∂rs exakt samma s√§tt lokalt och i produktion
2. **Isolering**: Alla dependencies (Node.js, npm-paket) √§r inkluderade
3. **Deployment**: Render kan ta din Docker image och k√∂ra den direkt
4. **CI/CD**: GitHub Actions bygger Docker image och pushar till Docker Hub, sedan tar Render den

**Process:**

```
Kod ‚Üí Dockerfile ‚Üí Docker Image ‚Üí Docker Hub ‚Üí Render tar image ‚Üí Backend k√∂rs!
```

### Render - Hosting av Backend

**Vad √§r Render?**

- Render √§r en hosting-plattform (liknande Heroku) som k√∂r din backend-applikation
- Den hanterar deployment, health checks, och auto-scaling automatiskt
- Du beh√∂ver inte konfigurera servrar sj√§lv

**Varf√∂r Render?**

1. **Enkel deployment**: Koppla GitHub repo ‚Üí automatiskt deployment
2. **Docker support**: Kan k√∂ra Docker containers direkt
3. **Database integration**: Enkelt att koppla PostgreSQL databas
4. **Auto-scaling**: Render skalar upp/down automatiskt baserat p√• trafik
5. **Health checks**: Render kontrollerar automatiskt om appen fungerar

**Process:**

```
Render tar Docker image fr√•n Docker Hub ‚Üí Startar container ‚Üí Backend √§r live p√• internet!
```

### AWS S3 - Hosting av Frontend

**Vad √§r AWS S3?**

- S3 (Simple Storage Service) √§r ett fil-lagringssystem fr√•n Amazon
- Perfekt f√∂r statiska filer som din React-app (HTML, CSS, JavaScript)
- Mycket billigt och snabbt f√∂r statiska webbplatser

**Varf√∂r S3 f√∂r frontend?**

1. **Billigt**: Mycket billigare √§n att k√∂ra en server f√∂r statiska filer
2. **Snabbt**: Filerna levereras direkt fr√•n AWS CDN
3. **Skalbar**: Hanterar miljontals requests utan problem
4. **Enkelt**: Bara ladda upp filerna och de √§r live

**Process:**

```
React kod ‚Üí npm run build ‚Üí Skapar statiska filer ‚Üí GitHub Actions ‚Üí AWS S3 ‚Üí Frontend √§r live!
```

## üîë Steg-f√∂r-steg: H√§mta Render Nycklar

### Steg 1: H√§mta Render API Key

1. G√• till [render.com](https://render.com) och logga in
2. Klicka p√• ditt **anv√§ndarnamn** (√∂vre h√∂gra h√∂rnet) > **Account Settings**
3. Scrolla ner till **API Keys**-sektionen
4. Klicka p√• **Create API Key**
5. Ge den ett namn (t.ex. "GitHub Actions")
6. Klicka **Create Key**
7. **Kopiera nyckeln direkt** (du kan bara se den en g√•ng!)
8. L√§gg in den i GitHub som **Repository Secret** med namnet `RENDER_API_KEY`

### Steg 2: Skapa Render Web Service

Du beh√∂ver skapa en Web Service p√• Render f√∂r att kunna h√§mta Service ID:

1. G√• till [Render Dashboard](https://dashboard.render.com)
2. Klicka **New +** > **Web Service**
3. Connect din GitHub repository:
   - Klicka **Connect GitHub**
   - V√§lj ditt repository
   - Klicka **Connect**
4. Konfigurera Web Service:
   - **Name**: `meetup-app-backend` (eller valfritt namn)
   - **Environment**: V√§lj **Docker**
   - **Root Directory**: `backend` (‚ö†Ô∏è VIKTIGT! Detta s√§tter build context till backend-mappen)
   - **Dockerfile Path**: `Dockerfile` (eller `./Dockerfile` - relativa till Root Directory)
   - **Branch**: `main`
   - **Auto-Deploy**: **Yes**
5. Scrolla ner till **Environment Variables** och l√§gg till:
   - `NODE_ENV` = `production`
   - `PORT` = `10000` (Render tilldelar port automatiskt, men detta √§r standard)
   - `DATABASE_URL` = Kopiera **Internal Database URL** fr√•n din PostgreSQL databas (fr√•n Render Dashboard > din databas > Connection info)
6. Klicka **Create Web Service**
7. Render kommer b√∂rja bygga din service (det kan ta n√•gra minuter)

> **Om du redan har skapat din service:** G√• till din service ‚Üí **Settings** ‚Üí scrolla ner till **Build**-sektionen ‚Üí √§ndra **Root Directory** till `backend` och **Dockerfile Path** till `Dockerfile` ‚Üí **Save Changes** ‚Üí starta en ny build.

### Steg 3: H√§mta Render Service ID

1. N√§r din Web Service √§r skapad, g√• till din service i Render Dashboard
2. Klicka p√• din service (`meetup-app-backend`)
3. Titta i adressf√§ltet - URL:en ser ut s√• h√§r:
   ```
   https://dashboard.render.com/web/YOUR_SERVICE_ID
   ```
4. **Service ID** √§r den l√•nga alfanumeriska str√§ngen efter `/web/`
   - T.ex. om URL:en √§r `https://dashboard.render.com/web/srv-abc123xyz456`
   - D√• √§r `srv-abc123xyz456` ditt Service ID
5. Alternativt: G√• till **Settings** i din service och scrolla ner till **Info** - Service ID finns d√§r ocks√•
6. L√§gg in Service ID i GitHub som **Repository Variable** med namnet `RENDER_SERVICE_ID`

### Steg 4: Koppla Database till Web Service

1. G√• till din PostgreSQL databas i Render Dashboard
2. Kopiera **Internal Database URL** (inte External - Internal √§r vad som anv√§nds i Render)
3. G√• till din Web Service > **Environment**
4. L√§gg till environment variable:
   - **Key**: `DATABASE_URL`
   - **Value**: Klistra in din Internal Database URL
5. Klicka **Save Changes**

> **Tips:** Om du har redan skapat din databas, kan du ocks√• koppla den direkt fr√•n databas-sidan genom att klicka p√• **Connect** och v√§lja din Web Service.

## ‚òÅÔ∏è Steg-f√∂r-steg: S√§tt upp AWS f√∂r Frontend Deployment

AWS credentials beh√∂vs f√∂r att GitHub Actions ska kunna ladda upp din React-app till AWS S3 (d√§r frontend hostas).

### Varf√∂r beh√∂vs AWS credentials?

**AWS_ACCESS_KEY_ID** och **AWS_SECRET_ACCESS_KEY** √§r som ditt "anv√§ndarnamn och l√∂senord" f√∂r att logga in p√• AWS fr√•n GitHub Actions. De anv√§nds f√∂r att:

1. **Authentisera** GitHub Actions till AWS
2. **Ladda upp** de byggda React-filerna till S3 bucket
3. **Hantera** filer i S3 (uppdatera, ta bort gamla filer, etc.)

### Steg 1: Skapa AWS-konto (om du inte har ett)

1. G√• till [aws.amazon.com](https://aws.amazon.com)
2. Klicka **Create an AWS Account**
3. F√∂lj instruktionerna f√∂r att skapa ett konto
4. Du beh√∂ver ett kreditkort men AWS Free Tier ger gener√∂st gratis utrymme

### Steg 2: Skapa IAM User och Access Keys

1. Logga in p√• [AWS Console](https://console.aws.amazon.com)
2. S√∂k efter **IAM** (Identity and Access Management) i s√∂kf√§ltet
3. Klicka p√• **IAM** i resultaten
4. I v√§nstermenyn, klicka p√• **Users** > **Create user**
5. Ange ett namn (t.ex. `github-actions-deploy`)
6. Under **Select AWS credential type**, v√§lj:
   - ‚úÖ **Access key - Programmatic access** (m√•ste vara vald)
   - ‚ùå **Password - AWS Management Console access** (avmarkerad/unchecked - beh√∂vs INTE f√∂r GitHub Actions)
7. Klicka **Next**
8. Under **Set permissions**, v√§lj **Attach policies directly**
9. S√∂k efter och kryssa i **AmazonS3FullAccess** (eller skapa en mer begr√§nsad policy om du vill)
10. Klicka **Next** > **Create user**
11. Klicka p√• den nyskapade anv√§ndaren
12. G√• till **Security credentials**-fliken
13. Scrolla ner till **Access keys**-sektionen
14. Klicka **Create access key**
15. V√§lj **Third-party service** som use case
    - GitHub Actions √§r en tredjepartstj√§nst (inte AWS) som beh√∂ver komma √•t dina AWS-resurser
    - Detta √§r det mest korrekta valet f√∂r CI/CD fr√•n GitHub
    - (Alternativt kan du v√§lja "Application running outside AWS" om "Third-party service" inte finns)
16. Klicka **Next** > **Create access key**
17. **VIKTIGT**: Kopiera b√•de:
    - **Access key ID** (l√§gg in som `AWS_ACCESS_KEY_ID` i GitHub)
    - **Secret access key** (l√§gg in som `AWS_SECRET_ACCESS_KEY` i GitHub)
    - ‚ö†Ô∏è Du kan bara se Secret access key EN g√•ng! Kopiera den direkt.
18. Klicka **Done**

### Steg 3: Skapa S3 Bucket f√∂r Frontend

1. I AWS Console, s√∂k efter **S3** och klicka p√• det
2. Klicka **Create bucket**
3. Ange bucket namn (t.ex. `meetup-app-frontend` - m√•ste vara globalt unikt)
4. V√§lj **Region** (t.ex. `eu-north-1` f√∂r Stockholm, eller n√§rmaste)
5. Scrolla ner och **avmarkera** "Block all public access" (vi beh√∂ver att frontend √§r publik)
6. Kryssa i "I acknowledge that..." f√∂r att bekr√§fta
7. Scrolla ner till **Static website hosting** och klicka **Edit**
   - ‚úÖ **Enable** static website hosting
   - **Index document**: `index.html`
   - **Error document**: `index.html` (f√∂r React Router)
   - Klicka **Save changes**
8. Klicka **Create bucket**
9. Klicka p√• din nya bucket
10. G√• till **Permissions**-fliken > **Bucket policy**
11. Klicka **Edit** och l√§gg till denna policy (ers√§tt `YOUR_BUCKET_NAME` med ditt bucket-namn):

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::YOUR_BUCKET_NAME/*"
    }
  ]
}
```

12. Klicka **Save changes**

### Steg 4: L√§gg in AWS Credentials i GitHub

1. G√• till ditt GitHub repository > **Settings** > **Secrets and variables** > **Actions**
2. Klicka **New repository secret**
3. Namn: `AWS_ACCESS_KEY_ID`, v√§rde: din Access Key ID fr√•n steg 2
4. Klicka **Add secret**
5. Klicka **New repository secret** igen
6. Namn: `AWS_SECRET_ACCESS_KEY`, v√§rde: din Secret Access Key fr√•n steg 2
7. Klicka **Add secret**
8. G√• till **Variables**-fliken
9. Klicka **New repository variable**
10. Namn: `AWS_S3_BUCKET_NAME`, v√§rde: ditt bucket-namn (t.ex. `meetup-app-frontend`)
11. Klicka **Add variable**
12. Klicka **New repository variable** igen
13. Namn: `AWS_REGION`, v√§rde: din region (t.ex. `eu-north-1`)
14. Klicka **Add variable**

### Steg 5: Hitta din S3 Website URL

1. G√• till din S3 bucket i AWS Console
2. Klicka p√• **Properties**-fliken
3. Scrolla ner till **Static website hosting**
4. Du ser **Bucket website endpoint** - detta √§r din frontend URL!
   - Format: `http://YOUR_BUCKET_NAME.s3-website-REGION.amazonaws.com`
   - T.ex. `http://meetup-app-frontend.s3-website-eu-north-1.amazonaws.com`

> **Tips:** F√∂r produktion kan du anv√§nda CloudFront (AWS CDN) f√∂r b√§ttre prestanda och HTTPS, men S3 direkt fungerar bra f√∂r utveckling/test.

## üîß Branch Protection Setup

1. G√• till **Settings > Branches**
2. L√§gg till rule f√∂r `main`:
   - ‚úÖ Require pull request
   - ‚úÖ Require approvals: 1
   - ‚úÖ Block direct pushes
3. (Valfritt) L√§gg till rule f√∂r `dev`

## üèóÔ∏è AWS S3 Setup

```bash
# Via AWS CLI (eller via Console)
aws s3 mb s3://meetup-app-frontend --region eu-north-1
aws s3 website s3://meetup-app-frontend \
  --index-document index.html \
  --error-document index.html
```

Gl√∂m inte att:

- ‚úÖ Block public access: OFF
- ‚úÖ Add bucket policy f√∂r public read
- ‚úÖ Enable static website hosting

## üê≥ Docker Test (Lokalt)

```bash
# Bygg image
cd backend
docker build -t meetup-app-backend .

# K√∂r container
docker run -p 3000:3000 \
  -e NODE_ENV=development \
  -e PORT=3000 \
  meetup-app-backend
```

## üîÑ Typisk Workflow

```bash
# 1. Skapa feature branch
git checkout dev
git pull
git checkout -b feature/my-feature

# 2. Arbeta och committa
git add .
git commit -m "feat: min nya feature"
git push -u origin feature/my-feature

# 3. Skapa PR p√• GitHub till dev
# ... code review ...
# ... merge ...

# 4. N√§r redo f√∂r produktion: PR fr√•n dev till main
# ... merge till main triggerar deployment ...
```

## üêõ Troubleshooting

### Workflow k√∂rs inte

- ‚úÖ Kontrollera att filen √§r i `.github/workflows/`
- ‚úÖ Kontrollera branch protection rules
- ‚úÖ Se Actions tab f√∂r felmeddelanden

### Docker build misslyckas

- ‚úÖ Kontrollera Dockerfile path
- ‚úÖ Kontrollera att allt √§r committed
- ‚úÖ Testa lokalt f√∂rst: `docker build -t test ./backend`

### S3 deployment misslyckas

- ‚úÖ Kontrollera AWS credentials
- ‚úÖ Kontrollera bucket namn (exakt matchning)
- ‚úÖ Kontrollera bucket permissions

### Render deployment misslyckas

- ‚úÖ Kontrollera RENDER_SERVICE_ID (hittas i Render dashboard)
- ‚úÖ Kontrollera att Dockerfile finns i backend/
- ‚úÖ Kontrollera att Render service √§r konfigurerad f√∂r Docker

## üìö Mer Information

- Detaljerad setup: `SETUP_GUIDE.md`
- Git flow: `GIT_FLOW_GUIDE.md`
- Architecture: `ARCHITECTURE_DECISIONS.md`
- Struktur: `PROJECT_STRUCTURE.md`
